{"ast":null,"code":"// TODO copy pasted from guide, make sure we understand what all this is doing\n// https://github.com/spring-guides/tut-react-and-spring-data-rest/blob/master/hypermedia/src/main/js/follow.js\nmodule.exports=function follow(api,rootPath,relArray){var root=api({method:'GET',path:rootPath});return relArray.reduce(function(root,arrayItem){var rel=typeof arrayItem==='string'?arrayItem:arrayItem.rel;return traverseNext(root,rel,arrayItem);},root);function traverseNext(root,rel,arrayItem){return root.then(function(response){if(hasEmbeddedRel(response.entity,rel)){return response.entity._embedded[rel];}if(!response.entity._links){return[];}if(typeof arrayItem==='string'){return api({method:'GET',path:response.entity._links[rel].href});}else{return api({method:'GET',path:response.entity._links[rel].href,params:arrayItem.params});}});}function hasEmbeddedRel(entity,rel){return entity._embedded&&entity._embedded.hasOwnProperty(rel);}};","map":{"version":3,"names":["module","exports","follow","api","rootPath","relArray","root","method","path","reduce","arrayItem","rel","traverseNext","then","response","hasEmbeddedRel","entity","_embedded","_links","href","params","hasOwnProperty"],"sources":["D:/Chronicle/chronicle-ttm/src/main/frontend/src/follow.js"],"sourcesContent":["// TODO copy pasted from guide, make sure we understand what all this is doing\r\n// https://github.com/spring-guides/tut-react-and-spring-data-rest/blob/master/hypermedia/src/main/js/follow.js\r\nmodule.exports = function follow(api, rootPath, relArray) {\r\n\tconst root = api({\r\n\t\tmethod: 'GET',\r\n\t\tpath: rootPath\r\n\t});\r\n\r\n\treturn relArray.reduce(function(root, arrayItem) {\r\n\t\tconst rel = typeof arrayItem === 'string' ? arrayItem : arrayItem.rel;\r\n\t\treturn traverseNext(root, rel, arrayItem);\r\n\t}, root);\r\n\r\n\tfunction traverseNext (root, rel, arrayItem) {\r\n\t\treturn root.then(function (response) {\r\n\t\t\tif (hasEmbeddedRel(response.entity, rel)) {\r\n\t\t\t\treturn response.entity._embedded[rel];\r\n\t\t\t}\r\n\r\n\t\t\tif(!response.entity._links) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof arrayItem === 'string') {\r\n\t\t\t\treturn api({\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tpath: response.entity._links[rel].href\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn api({\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tpath: response.entity._links[rel].href,\r\n\t\t\t\t\tparams: arrayItem.params\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction hasEmbeddedRel (entity, rel) {\r\n\t\treturn entity._embedded && entity._embedded.hasOwnProperty(rel);\r\n\t}\r\n};"],"mappings":"AAAA;AACA;AACAA,MAAM,CAACC,OAAP,CAAiB,QAASC,OAAT,CAAgBC,GAAhB,CAAqBC,QAArB,CAA+BC,QAA/B,CAAyC,CACzD,GAAMC,KAAI,CAAGH,GAAG,CAAC,CAChBI,MAAM,CAAE,KADQ,CAEhBC,IAAI,CAAEJ,QAFU,CAAD,CAAhB,CAKA,MAAOC,SAAQ,CAACI,MAAT,CAAgB,SAASH,IAAT,CAAeI,SAAf,CAA0B,CAChD,GAAMC,IAAG,CAAG,MAAOD,UAAP,GAAqB,QAArB,CAAgCA,SAAhC,CAA4CA,SAAS,CAACC,GAAlE,CACA,MAAOC,aAAY,CAACN,IAAD,CAAOK,GAAP,CAAYD,SAAZ,CAAnB,CACA,CAHM,CAGJJ,IAHI,CAAP,CAKA,QAASM,aAAT,CAAuBN,IAAvB,CAA6BK,GAA7B,CAAkCD,SAAlC,CAA6C,CAC5C,MAAOJ,KAAI,CAACO,IAAL,CAAU,SAAUC,QAAV,CAAoB,CACpC,GAAIC,cAAc,CAACD,QAAQ,CAACE,MAAV,CAAkBL,GAAlB,CAAlB,CAA0C,CACzC,MAAOG,SAAQ,CAACE,MAAT,CAAgBC,SAAhB,CAA0BN,GAA1B,CAAP,CACA,CAED,GAAG,CAACG,QAAQ,CAACE,MAAT,CAAgBE,MAApB,CAA4B,CAC3B,MAAO,EAAP,CACA,CAED,GAAI,MAAOR,UAAP,GAAqB,QAAzB,CAAmC,CAClC,MAAOP,IAAG,CAAC,CACVI,MAAM,CAAE,KADE,CAEVC,IAAI,CAAEM,QAAQ,CAACE,MAAT,CAAgBE,MAAhB,CAAuBP,GAAvB,EAA4BQ,IAFxB,CAAD,CAAV,CAIA,CALD,IAKO,CACN,MAAOhB,IAAG,CAAC,CACVI,MAAM,CAAE,KADE,CAEVC,IAAI,CAAEM,QAAQ,CAACE,MAAT,CAAgBE,MAAhB,CAAuBP,GAAvB,EAA4BQ,IAFxB,CAGVC,MAAM,CAAEV,SAAS,CAACU,MAHR,CAAD,CAAV,CAKA,CACD,CArBM,CAAP,CAsBA,CAED,QAASL,eAAT,CAAyBC,MAAzB,CAAiCL,GAAjC,CAAsC,CACrC,MAAOK,OAAM,CAACC,SAAP,EAAoBD,MAAM,CAACC,SAAP,CAAiBI,cAAjB,CAAgCV,GAAhC,CAA3B,CACA,CACD,CAvCD"},"metadata":{},"sourceType":"module"}