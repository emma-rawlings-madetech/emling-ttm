{"ast":null,"code":"'use strict';import _classCallCheck from\"D:/Chronicle/chronicle-ttm/src/main/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Chronicle/chronicle-ttm/src/main/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Chronicle/chronicle-ttm/src/main/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Chronicle/chronicle-ttm/src/main/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Chronicle/chronicle-ttm/src/main/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import'./App.css';import React from'react';import ReactDOM from'react-dom';import when from'when';import client from'./client';import follow from'./follow';// function to hop multiple links by \"rel\"\nimport stompClient from'./websocket-listener';import{auth}from'../utils/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var root='/api';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={tabletopSystems:[],attributes:[],page:1,pageSize:2,links:{},loggedInManager:_this.props.loggedInManager};_this.updatePageSize=_this.updatePageSize.bind(_assertThisInitialized(_this));_this.onCreate=_this.onCreate.bind(_assertThisInitialized(_this));_this.onUpdate=_this.onUpdate.bind(_assertThisInitialized(_this));_this.onDelete=_this.onDelete.bind(_assertThisInitialized(_this));_this.onNavigate=_this.onNavigate.bind(_assertThisInitialized(_this));_this.refreshCurrentPage=_this.refreshCurrentPage.bind(_assertThisInitialized(_this));_this.refreshAndGoToLastPage=_this.refreshAndGoToLastPage.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"loadFromServer\",value:function loadFromServer(pageSize){var _this2=this;follow(client,root,[{rel:'tabletopSystems',params:{size:pageSize}}]).then(function(tabletopSystemCollection){return client({method:'GET',path:tabletopSystemCollection.entity._links.profile.href,headers:{'Accept':'application/schema+json'}}).then(function(schema){/**\n                 * Filter unneeded JSON Schema properties, like uri references and\n                 * subtypes ($ref).\n                 */Object.keys(schema.entity.properties).forEach(function(property){if(schema.entity.properties[property].hasOwnProperty('format')&&schema.entity.properties[property].format==='uri'){delete schema.entity.properties[property];}else if(schema.entity.properties[property].hasOwnProperty('$ref')){delete schema.entity.properties[property];}});_this2.schema=schema.entity;_this2.links=tabletopSystemCollection.entity._links;return tabletopSystemCollection;});}).then(function(tabletopSystemCollection){return tabletopSystemCollection.entity._embedded.tabletopSystems.map(function(tabletopSystem){return client({method:'GET',path:tabletopSystem._links.self.href});});}).then(function(tabletopSystemPromises){return when.all(tabletopSystemPromises);}).done(function(tabletopSystems){_this2.setState({tabletopSystems:tabletopSystems,attributes:Object.keys(_this2.schema.properties),pageSize:pageSize,links:_this2.links});});}},{key:\"onCreate\",value:function onCreate(newTabletopSystem){follow(client,root,['tabletopSystems']).then(function(tabletopSystemCollection){return client({method:'POST',path:tabletopSystemCollection.entity._links.self.href,entity:newTabletopSystem,headers:{'Content-Type':'application/json'}});});//    \t.then(response => {\n//    \t\treturn follow(client, root, [\n//    \t\t\t{rel: 'tabletopSystems', params: {'size': this.state.pageSize}}]);\n//    \t}).done(response => {\n//    \t\tif (typeof response.entity._links.last !== \"undefined\") {\n//    \t\t\tthis.onNavigate(response.entity._links.last.href);\n//    \t\t} else {\n//    \t\t\tthis.onNavigate(response.entity._links.self.href);\n//    \t\t}\n//    \t});\n}},{key:\"onUpdate\",value:function onUpdate(tabletopSystem,updatedTabletopSystem){if(tabletopSystem.entity.manager.name===this.state.loggedInAuthor){updatedTabletopSystem[\"author\"]=tabletopSystem.entity.author;client({method:'PUT',path:tabletopSystem.entity._links.self.href,entity:updatedTabletopSystem,headers:{'Content-Type':'application/json','If-Match':tabletopSystem.headers.Etag}}).done(function(response){/* Let the websocket handler update the state */ //    \t\tthis.loadFromServer(this.state.pageSize);\n},function(response){if(response.status.code===412){alert('DENIED: Unable to update '+tabletopSystem.entity._links.self.href+'. Your copy is stale.');}});}else{alert(\"You are not authorized to update\");}}},{key:\"onDelete\",value:function onDelete(tabletopSystem){client({method:'DELETE',path:tabletopSystem.entity._links.self.href}).done(function(response){/* let the websocket handle updating the UI */},function(response){if(response.status.code===403){alert('ACCESS DENIED: You are not authorized to delete '+tabletopSystem.entity._links.self.href);}});}},{key:\"onNavigate\",value:function onNavigate(navUri){var _this3=this;client({method:'GET',path:navUri}).then(function(tabletopSystemCollection){_this3.links=tabletopSystemCollection.entity._links;return tabletopSystemCollection.entity._embedded.tabletopSystems.map(function(tabletopSystem){return client({method:'GET',path:tabletopSystem._links.self.href});});}).then(function(tabletopSystemPromises){return when.all(tabletopSystemPromises);}).done(function(tabletopSystems){_this3.setState({tabletopSystems:tabletopSystems,attributes:Object.keys(_this3.schema.properties),pageSize:_this3.state.pageSize,links:_this3.links});});}},{key:\"updatePageSize\",value:function updatePageSize(pageSize){if(pageSize!==this.state.pageSize){this.loadFromServer(pageSize);}}},{key:\"refreshAndGoToLastPage\",value:function refreshAndGoToLastPage(message){var _this4=this;follow(client,root,[{rel:'tabletopSystems',params:{size:this.state.pageSize}}]).done(function(response){if(response.entity._links.last!==undefined){_this4.onNavigate(response.entity._links.last.href);}else{_this4.onNavigate(response.entity._links.self.href);}});}},{key:\"refreshCurrentPage\",value:function refreshCurrentPage(message){var _this5=this;follow(client,root,[{rel:'tabletopSystems',params:{size:this.state.pageSize,page:this.state.page.number}}]).then(function(tabletopSystemCollection){_this5.links=tabletopSystemCollection.entity._links;_this5.page=tabletopSystemCollection.entity.page;return tabletopSystemCollection.entity._embedded.tabletopSystems.map(function(tabletopSystem){return client({method:'GET',path:tabletopSystem._links.self.href});});}).then(function(tabletopSystemPromises){return when.all(tabletopSystemPromises);}).then(function(tabletopSystems){_this5.setState({page:_this5.page,tabletopSystems:tabletopSystems,attributes:Object.keys(_this5.schema.properties),pageSize:_this5.state.pageSize,links:_this5.links});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadFromServer(this.state.pageSize);stompClient.register([{route:'/topic/newTabletopSystem',callback:this.refreshAndGoToLastPage},{route:'/topic/updateTabletopSystem',callback:this.refreshCurrentPage},{route:'/topic/deleteTabletopSystem',callback:this.refreshCurrentPage}]);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:auth().currentUser.getIdToken()}),/*#__PURE__*/_jsx(CreateDialog,{attributes:this.state.attributes,onCreate:this.onCreate}),/*#__PURE__*/_jsx(TabletopSystemList,{tabletopSystems:this.state.tabletopSystems,links:this.state.links,pageSize:this.state.pageSize,attributes:this.state.attributes,onNavigate:this.onNavigate,onUpdate:this.onUpdate,onDelete:this.onDelete,updatePageSize:this.updatePageSize,loggedInAuthor:this.state.loggedInAuthor})]});}}]);return App;}(React.Component);export{App as default};var CreateDialog=/*#__PURE__*/function(_React$Component2){_inherits(CreateDialog,_React$Component2);var _super2=_createSuper(CreateDialog);function CreateDialog(props){var _this6;_classCallCheck(this,CreateDialog);_this6=_super2.call(this,props);_this6.handleSubmit=_this6.handleSubmit.bind(_assertThisInitialized(_this6));return _this6;}_createClass(CreateDialog,[{key:\"handleSubmit\",value:function handleSubmit(e){var _this7=this;e.preventDefault();var newTabletopSystem={};this.props.attributes.forEach(function(attribute){newTabletopSystem[attribute]=ReactDOM.findDOMNode(_this7.refs[attribute]).value.trim();});this.props.onCreate(newTabletopSystem);// clear out the dialog's inputs\nthis.props.attributes.forEach(function(attribute){ReactDOM.findDOMNode(_this7.refs[attribute]).value='';});// Navigate away from the dialog to hide it.\nwindow.location=\"#\";}},{key:\"render\",value:function render(){var inputs=this.props.attributes.map(function(attribute){return/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:attribute,ref:attribute,className:\"field\"})},attribute);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"#createTabletopSystem\",children:\"Create\"}),/*#__PURE__*/_jsx(\"div\",{id:\"createTabletopSystem\",className:\"modalDialog\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",title:\"Close\",className:\"close\",children:\"X\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Create new tabletop system\"}),/*#__PURE__*/_jsxs(\"form\",{children:[inputs,/*#__PURE__*/_jsx(\"button\",{onClick:this.handleSubmit,children:\"Create\"})]})]})})]});}}]);return CreateDialog;}(React.Component);var UpdateDialog=/*#__PURE__*/function(_React$Component3){_inherits(UpdateDialog,_React$Component3);var _super3=_createSuper(UpdateDialog);function UpdateDialog(props){var _this8;_classCallCheck(this,UpdateDialog);_this8=_super3.call(this,props);_this8.handleSubmit=_this8.handleSubmit.bind(_assertThisInitialized(_this8));return _this8;}_createClass(UpdateDialog,[{key:\"handleSubmit\",value:function handleSubmit(e){var _this9=this;e.preventDefault();var updatedTabletopSystem={};this.props.attributes.forEach(function(attribute){updatedTabletopSystem[attribute]=ReactDOM.findDOMNode(_this9.refs[attribute]).value.trim();});this.props.onUpdate(this.props.tabletopSystem,updatedTabletopSystem);window.location=\"#\";}},{key:\"render\",value:function render(){var _this10=this;var inputs=this.props.attributes.map(function(attribute){return/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:attribute,defaultValue:_this10.props.tabletopSystem.entity[attribute],ref:attribute,className:\"field\"})},_this10.props.tabletopSystem.entity[attribute]);});var dialogId=\"updateTabletopSystem-\"+this.props.tabletopSystem.entity._links.self.href;var isAuthorCorrect=this.props.tabletopSystem.entity.author.name==this.props.loggedInAuthor;if(isAuthorCorrect===false){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{children:\"Not Your Employee\"})});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\"+dialogId,children:\"Update\"}),/*#__PURE__*/_jsx(\"div\",{id:dialogId,className:\"modalDialog\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",title:\"Close\",className:\"close\",children:\"X\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Update a tabletop system\"}),/*#__PURE__*/_jsxs(\"form\",{children:[inputs,/*#__PURE__*/_jsx(\"button\",{onClick:this.handleSubmit,children:\"Update\"})]})]})})]},this.props.tabletopSystem.entity._links.self.href);}}}]);return UpdateDialog;}(React.Component);;var TabletopSystemList=/*#__PURE__*/function(_React$Component4){_inherits(TabletopSystemList,_React$Component4);var _super4=_createSuper(TabletopSystemList);function TabletopSystemList(props){var _this11;_classCallCheck(this,TabletopSystemList);_this11=_super4.call(this,props);_this11.handleNavFirst=_this11.handleNavFirst.bind(_assertThisInitialized(_this11));_this11.handleNavPrev=_this11.handleNavPrev.bind(_assertThisInitialized(_this11));_this11.handleNavNext=_this11.handleNavNext.bind(_assertThisInitialized(_this11));_this11.handleNavLast=_this11.handleNavLast.bind(_assertThisInitialized(_this11));_this11.handleInput=_this11.handleInput.bind(_assertThisInitialized(_this11));return _this11;}_createClass(TabletopSystemList,[{key:\"handleInput\",value:function handleInput(e){e.preventDefault();var pageSize=ReactDOM.findDOMNode(this.refs.pageSize).value;if(/^[0-9]+$/.test(pageSize)){this.props.updatePageSize(pageSize);}else{ReactDOM.findDOMNode(this.refs.pageSize).value=pageSize.substring(0,pageSize.length-1);}}},{key:\"handleNavFirst\",value:function handleNavFirst(e){e.preventDefault();this.props.onNavigate(this.props.links.first.href);}},{key:\"handleNavPrev\",value:function handleNavPrev(e){e.preventDefault();this.props.onNavigate(this.props.links.prev.href);}},{key:\"handleNavNext\",value:function handleNavNext(e){e.preventDefault();this.props.onNavigate(this.props.links.next.href);}},{key:\"handleNavLast\",value:function handleNavLast(e){e.preventDefault();this.props.onNavigate(this.props.links.last.href);}},{key:\"render\",value:function render(){var _this12=this;//\t    const pageInfo = this.props.page.hasOwnProperty(\"number\") ?\n//        \t\t\t<h3>Tabletop Systems - Page {this.props.page.number + 1} of {this.props.page.totalPages}</h3> : null;\nvar tabletopSystems=this.props.tabletopSystems.map(function(tabletopSystem){return/*#__PURE__*/_jsx(TabletopSystem,{tabletopSystem:tabletopSystem,attributes:_this12.props.attributes,onUpdate:_this12.props.onUpdate,onDelete:_this12.props.onDelete},tabletopSystem.entity._links.self.href);});var navLinks=[];if(\"first\"in this.props.links){navLinks.push(/*#__PURE__*/_jsx(\"button\",{onClick:this.handleNavFirst,children:\"<<\"},\"first\"));}if(\"prev\"in this.props.links){navLinks.push(/*#__PURE__*/_jsx(\"button\",{onClick:this.handleNavPrev,children:\"<\"},\"prev\"));}if(\"next\"in this.props.links){navLinks.push(/*#__PURE__*/_jsx(\"button\",{onClick:this.handleNavNext,children:\">\"},\"next\"));}if(\"last\"in this.props.links){navLinks.push(/*#__PURE__*/_jsx(\"button\",{onClick:this.handleNavLast,children:\">>\"},\"last\"));}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{ref:\"pageSize\",defaultValue:this.props.pageSize,onInput:this.handleInput}),/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{})]}),tabletopSystems]})}),/*#__PURE__*/_jsx(\"div\",{children:navLinks})]});}}]);return TabletopSystemList;}(React.Component);var TabletopSystem=/*#__PURE__*/function(_React$Component5){_inherits(TabletopSystem,_React$Component5);var _super5=_createSuper(TabletopSystem);function TabletopSystem(props){var _this13;_classCallCheck(this,TabletopSystem);_this13=_super5.call(this,props);_this13.handleDelete=_this13.handleDelete.bind(_assertThisInitialized(_this13));return _this13;}_createClass(TabletopSystem,[{key:\"handleDelete\",value:function handleDelete(){this.props.onDelete(this.props.tabletopSystem);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:this.props.tabletopSystem.entity.name}),/*#__PURE__*/_jsx(\"td\",{children:this.props.tabletopSystem.entity.description}),/*#__PURE__*/_jsx(\"td\",{children:this.props.tabletopSystem.entity.manager.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(UpdateDialog,{tabletopSystem:this.props.tabletopSystem,attributes:this.props.attributes,onUpdate:this.props.onUpdate,loggedInAuthor:this.props.loggedInAuthor})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:this.handleDelete,children:\"Delete\"})})]});}}]);return TabletopSystem;}(React.Component);","map":{"version":3,"names":["React","ReactDOM","when","client","follow","stompClient","auth","root","App","props","state","tabletopSystems","attributes","page","pageSize","links","loggedInManager","updatePageSize","bind","onCreate","onUpdate","onDelete","onNavigate","refreshCurrentPage","refreshAndGoToLastPage","rel","params","size","then","tabletopSystemCollection","method","path","entity","_links","profile","href","headers","schema","Object","keys","properties","forEach","property","hasOwnProperty","format","_embedded","map","tabletopSystem","self","tabletopSystemPromises","all","done","setState","newTabletopSystem","updatedTabletopSystem","manager","name","loggedInAuthor","author","Etag","response","status","code","alert","navUri","loadFromServer","message","last","undefined","number","register","route","callback","currentUser","getIdToken","Component","CreateDialog","handleSubmit","e","preventDefault","attribute","findDOMNode","refs","value","trim","window","location","inputs","UpdateDialog","dialogId","isAuthorCorrect","TabletopSystemList","handleNavFirst","handleNavPrev","handleNavNext","handleNavLast","handleInput","test","substring","length","first","prev","next","navLinks","push","TabletopSystem","handleDelete","description"],"sources":["D:/Chronicle/chronicle-ttm/src/main/frontend/src/App.js"],"sourcesContent":["'use strict';\n\nimport './App.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport when from 'when';\nimport client from './client';\nimport follow from './follow'; // function to hop multiple links by \"rel\"\nimport stompClient from './websocket-listener';\nimport {auth} from '../utils/firebase'\n\nconst root = '/api';\n\nexport default class App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {tabletopSystems: [], attributes: [], page: 1, pageSize: 2, links: {},\n\t\t loggedInManager: this.props.loggedInManager};\n\t\tthis.updatePageSize = this.updatePageSize.bind(this);\n\t\tthis.onCreate = this.onCreate.bind(this);\n\t\tthis.onUpdate = this.onUpdate.bind(this);\n\t\tthis.onDelete = this.onDelete.bind(this);\n\t\tthis.onNavigate = this.onNavigate.bind(this);\n\t\tthis.refreshCurrentPage = this.refreshCurrentPage.bind(this);\n\t\tthis.refreshAndGoToLastPage = this.refreshAndGoToLastPage.bind(this);\n\t}\n\n\tloadFromServer(pageSize) {\n    \tfollow(client, root, [\n            {rel: 'tabletopSystems', params: {size: pageSize}}]\n        ).then(tabletopSystemCollection => {\n            return client({\n                method: 'GET',\n                path: tabletopSystemCollection.entity._links.profile.href,\n                headers: {'Accept': 'application/schema+json'}\n            }).then(schema => {\n                /**\n                 * Filter unneeded JSON Schema properties, like uri references and\n                 * subtypes ($ref).\n                 */\n                Object.keys(schema.entity.properties).forEach(function (property) {\n                    if (schema.entity.properties[property].hasOwnProperty('format') &&\n                        schema.entity.properties[property].format === 'uri') {\n                        delete schema.entity.properties[property];\n                    }\n                    else if (schema.entity.properties[property].hasOwnProperty('$ref')) {\n                        delete schema.entity.properties[property];\n                    }\n                });\n\n                this.schema = schema.entity;\n                this.links = tabletopSystemCollection.entity._links;\n                return tabletopSystemCollection;\n            });\n        }).then(tabletopSystemCollection => {\n            return tabletopSystemCollection.entity._embedded.tabletopSystems.map(tabletopSystem =>\n                    client({\n                        method: 'GET',\n                        path: tabletopSystem._links.self.href\n                    })\n            );\n        }).then(tabletopSystemPromises => {\n            return when.all(tabletopSystemPromises);\n        }).done(tabletopSystems => {\n            this.setState({\n                tabletopSystems: tabletopSystems,\n                attributes: Object.keys(this.schema.properties),\n                pageSize: pageSize,\n                links: this.links\n            });\n        });\n    }\n\n    onCreate(newTabletopSystem) {\n    \tfollow(client, root, ['tabletopSystems']).then(tabletopSystemCollection => {\n    \t\treturn client({\n    \t\t\tmethod: 'POST',\n    \t\t\tpath: tabletopSystemCollection.entity._links.self.href,\n    \t\t\tentity: newTabletopSystem,\n    \t\t\theaders: {'Content-Type': 'application/json'}\n    \t\t})\n    \t})\n//    \t.then(response => {\n//    \t\treturn follow(client, root, [\n//    \t\t\t{rel: 'tabletopSystems', params: {'size': this.state.pageSize}}]);\n//    \t}).done(response => {\n//    \t\tif (typeof response.entity._links.last !== \"undefined\") {\n//    \t\t\tthis.onNavigate(response.entity._links.last.href);\n//    \t\t} else {\n//    \t\t\tthis.onNavigate(response.entity._links.self.href);\n//    \t\t}\n//    \t});\n    }\n\n    onUpdate(tabletopSystem, updatedTabletopSystem) {\n        if(tabletopSystem.entity.manager.name === this.state.loggedInAuthor) {\n            updatedTabletopSystem[\"author\"] = tabletopSystem.entity.author;\n            client({\n                method: 'PUT',\n                path: tabletopSystem.entity._links.self.href,\n                entity: updatedTabletopSystem,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'If-Match': tabletopSystem.headers.Etag\n                }\n            }).done(response => {\n                /* Let the websocket handler update the state */\n    //    \t\tthis.loadFromServer(this.state.pageSize);\n            }, response => {\n                if (response.status.code === 412) {\n                    alert('DENIED: Unable to update ' +\n                        tabletopSystem.entity._links.self.href + '. Your copy is stale.');\n                }\n            });\n        } else {\n            alert(\"You are not authorized to update\");\n        }\n    }\n\n\tonDelete(tabletopSystem) {\n\t\tclient({method: 'DELETE', path: tabletopSystem.entity._links.self.href})\n\t\t.done(response => {/* let the websocket handle updating the UI */},\n\t\tresponse => {\n            if (response.status.code === 403) {\n                alert('ACCESS DENIED: You are not authorized to delete ' +\n                    tabletopSystem.entity._links.self.href);\n            }\n\t\t});\n\t}\n\n\tonNavigate(navUri) {\n\t\tclient({\n\t\t\tmethod: 'GET',\n\t\t\tpath: navUri\n\t\t}).then(tabletopSystemCollection => {\n\t\t\tthis.links = tabletopSystemCollection.entity._links;\n\n\t\t\treturn tabletopSystemCollection.entity._embedded.tabletopSystems.map(tabletopSystem =>\n\t\t\t\t\tclient({\n\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\tpath: tabletopSystem._links.self.href\n\t\t\t\t\t})\n\t\t\t);\n\t\t}).then(tabletopSystemPromises => {\n\t\t\treturn when.all(tabletopSystemPromises);\n\t\t}).done(tabletopSystems => {\n\t\t\tthis.setState({\n\t\t\t\ttabletopSystems: tabletopSystems,\n\t\t\t\tattributes: Object.keys(this.schema.properties),\n\t\t\t\tpageSize: this.state.pageSize,\n\t\t\t\tlinks: this.links\n\t\t\t});\n\t\t});\n\t}\n\n\tupdatePageSize(pageSize) {\n\t\tif (pageSize !== this.state.pageSize) {\n\t\t\tthis.loadFromServer(pageSize);\n\t\t}\n\t}\n\n    refreshAndGoToLastPage(message) {\n    \tfollow(client, root, [{\n    \t\trel: 'tabletopSystems',\n    \t\tparams: {size: this.state.pageSize}\n    \t}]).done(response => {\n    \t\tif (response.entity._links.last !== undefined) {\n    \t\t\tthis.onNavigate(response.entity._links.last.href);\n    \t\t} else {\n    \t\t\tthis.onNavigate(response.entity._links.self.href);\n    \t\t}\n    \t})\n    }\n\n    refreshCurrentPage(message) {\n    \tfollow(client, root, [{\n    \t\trel: 'tabletopSystems',\n    \t\tparams: {\n    \t\t\tsize: this.state.pageSize,\n    \t\t\tpage: this.state.page.number\n    \t\t}\n    \t}]).then(tabletopSystemCollection => {\n    \t\tthis.links = tabletopSystemCollection.entity._links;\n    \t\tthis.page = tabletopSystemCollection.entity.page;\n\n    \t\treturn tabletopSystemCollection.entity._embedded.tabletopSystems.map(tabletopSystem => {\n    \t\t\treturn client({\n    \t\t\t\tmethod: 'GET',\n    \t\t\t\tpath: tabletopSystem._links.self.href\n    \t\t\t})\n    \t\t});\n    \t}).then(tabletopSystemPromises => {\n    \t\treturn when.all(tabletopSystemPromises);\n    \t}).then(tabletopSystems => {\n    \t\tthis.setState({\n    \t\t\tpage: this.page,\n    \t\t\ttabletopSystems: tabletopSystems,\n    \t\t\tattributes: Object.keys(this.schema.properties),\n    \t\t\tpageSize: this.state.pageSize,\n    \t\t\tlinks: this.links\n    \t\t});\n    \t});\n    }\n\n\tcomponentDidMount() {\n\t    this.loadFromServer(this.state.pageSize);\n        stompClient.register([\n            {route: '/topic/newTabletopSystem', callback: this.refreshAndGoToLastPage},\n            {route: '/topic/updateTabletopSystem', callback: this.refreshCurrentPage},\n            {route: '/topic/deleteTabletopSystem', callback: this.refreshCurrentPage}\n        ]);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t    <h1>{auth().currentUser.getIdToken()}</h1>\n\t\t\t\t<CreateDialog attributes={this.state.attributes} onCreate={this.onCreate}/>\n\t\t\t\t<TabletopSystemList tabletopSystems={this.state.tabletopSystems}\n\t\t\t\t\t\t\t  links={this.state.links}\n\t\t\t\t\t\t\t  pageSize={this.state.pageSize}\n\t\t\t\t\t\t\t  attributes={this.state.attributes}\n\t\t\t\t\t\t\t  onNavigate={this.onNavigate}\n\t\t\t\t\t\t\t  onUpdate={this.onUpdate}\n\t\t\t\t\t\t\t  onDelete={this.onDelete}\n\t\t\t\t\t\t\t  updatePageSize={this.updatePageSize}\n\t\t\t\t\t\t\t  loggedInAuthor={this.state.loggedInAuthor}/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass CreateDialog extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst newTabletopSystem = {};\n\t\tthis.props.attributes.forEach(attribute => {\n\t\t\tnewTabletopSystem[attribute] = ReactDOM.findDOMNode(this.refs[attribute]).value.trim();\n\t\t});\n\t\tthis.props.onCreate(newTabletopSystem);\n\n\t\t// clear out the dialog's inputs\n\t\tthis.props.attributes.forEach(attribute => {\n\t\t\tReactDOM.findDOMNode(this.refs[attribute]).value = '';\n\t\t});\n\n\t\t// Navigate away from the dialog to hide it.\n\t\twindow.location = \"#\";\n\t}\n\n\trender() {\n\t\tconst inputs = this.props.attributes.map(attribute =>\n\t\t\t<p key={attribute}>\n\t\t\t\t<input type=\"text\" placeholder={attribute} ref={attribute} className=\"field\"/>\n\t\t\t</p>\n\t\t);\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<a href=\"#createTabletopSystem\">Create</a>\n\n\t\t\t\t<div id=\"createTabletopSystem\" className=\"modalDialog\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a href=\"#\" title=\"Close\" className=\"close\">X</a>\n\n\t\t\t\t\t\t<h2>Create new tabletop system</h2>\n\n\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t{inputs}\n\t\t\t\t\t\t\t<button onClick={this.handleSubmit}>Create</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass UpdateDialog extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleSubmit(e) {\n\t\te.preventDefault();\n\t\tconst updatedTabletopSystem = {};\n\t\tthis.props.attributes.forEach(attribute => {\n\t\t\tupdatedTabletopSystem[attribute] = ReactDOM.findDOMNode(this.refs[attribute]).value.trim();\n\t\t});\n\t\tthis.props.onUpdate(this.props.tabletopSystem, updatedTabletopSystem);\n\t\twindow.location = \"#\";\n\t}\n\n\trender() {\n\t\tconst inputs = this.props.attributes.map(attribute =>\n\t\t\t<p key={this.props.tabletopSystem.entity[attribute]}>\n\t\t\t\t<input type=\"text\" placeholder={attribute}\n\t\t\t\t\t   defaultValue={this.props.tabletopSystem.entity[attribute]}\n\t\t\t\t\t   ref={attribute} className=\"field\"/>\n\t\t\t</p>\n\t\t);\n\n\t\tconst dialogId = \"updateTabletopSystem-\" + this.props.tabletopSystem.entity._links.self.href;\n\n\t\tconst isAuthorCorrect = this.props.tabletopSystem.entity.author.name == this.props.loggedInAuthor;\n\n        if (isAuthorCorrect === false) {\n            return (\n                <div>\n                    <a>Not Your Employee</a>\n                </div>\n            )\n\t\t} else {\n            return (\n                <div key={this.props.tabletopSystem.entity._links.self.href}>\n                    <a href={\"#\" + dialogId}>Update</a>\n                    <div id={dialogId} className=\"modalDialog\">\n                        <div>\n                            <a href=\"#\" title=\"Close\" className=\"close\">X</a>\n\n                            <h2>Update a tabletop system</h2>\n\n                            <form>\n                                {inputs}\n                                <button onClick={this.handleSubmit}>Update</button>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            )\n           }\n\t}\n\n};\n\nclass TabletopSystemList extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleNavFirst = this.handleNavFirst.bind(this);\n\t\tthis.handleNavPrev = this.handleNavPrev.bind(this);\n\t\tthis.handleNavNext = this.handleNavNext.bind(this);\n\t\tthis.handleNavLast = this.handleNavLast.bind(this);\n\t\tthis.handleInput = this.handleInput.bind(this);\n\t}\n\n\thandleInput(e) {\n\t\te.preventDefault();\n\t\tconst pageSize = ReactDOM.findDOMNode(this.refs.pageSize).value;\n\t\tif (/^[0-9]+$/.test(pageSize)) {\n\t\t\tthis.props.updatePageSize(pageSize);\n\t\t} else {\n\t\t\tReactDOM.findDOMNode(this.refs.pageSize).value =\n\t\t\t\tpageSize.substring(0, pageSize.length - 1);\n\t\t}\n\t}\n\n\thandleNavFirst(e){\n\t\te.preventDefault();\n\t\tthis.props.onNavigate(this.props.links.first.href);\n\t}\n\n\thandleNavPrev(e) {\n\t\te.preventDefault();\n\t\tthis.props.onNavigate(this.props.links.prev.href);\n\t}\n\n\thandleNavNext(e) {\n\t\te.preventDefault();\n\t\tthis.props.onNavigate(this.props.links.next.href);\n\t}\n\n\thandleNavLast(e) {\n\t\te.preventDefault();\n\t\tthis.props.onNavigate(this.props.links.last.href);\n\t}\n\n\trender() {\n//\t    const pageInfo = this.props.page.hasOwnProperty(\"number\") ?\n//        \t\t\t<h3>Tabletop Systems - Page {this.props.page.number + 1} of {this.props.page.totalPages}</h3> : null;\n\n\t\tconst tabletopSystems = this.props.tabletopSystems.map(tabletopSystem =>\n\t\t\t<TabletopSystem key={tabletopSystem.entity._links.self.href}\n\t\t\t    tabletopSystem={tabletopSystem}\n\t\t\t    attributes={this.props.attributes}\n\t\t\t\tonUpdate={this.props.onUpdate}\n\t\t\t    onDelete={this.props.onDelete}/>\n\t\t);\n\n\t\tconst navLinks = [];\n\t\tif (\"first\" in this.props.links) {\n\t\t\tnavLinks.push(<button key=\"first\" onClick={this.handleNavFirst}>&lt;&lt;</button>);\n\t\t}\n\t\tif (\"prev\" in this.props.links) {\n\t\t\tnavLinks.push(<button key=\"prev\" onClick={this.handleNavPrev}>&lt;</button>);\n\t\t}\n\t\tif (\"next\" in this.props.links) {\n\t\t\tnavLinks.push(<button key=\"next\" onClick={this.handleNavNext}>&gt;</button>);\n\t\t}\n\t\tif (\"last\" in this.props.links) {\n\t\t\tnavLinks.push(<button key=\"last\" onClick={this.handleNavLast}>&gt;&gt;</button>);\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input ref=\"pageSize\" defaultValue={this.props.pageSize} onInput={this.handleInput}/>\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Description</th>\n\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{tabletopSystems}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<div>\n\t\t\t\t\t{navLinks}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass TabletopSystem extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleDelete = this.handleDelete.bind(this);\n\t}\n\n\thandleDelete() {\n\t\tthis.props.onDelete(this.props.tabletopSystem);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<tr>\n\t\t\t\t<td>{this.props.tabletopSystem.entity.name}</td>\n\t\t\t\t<td>{this.props.tabletopSystem.entity.description}</td>\n\t\t\t\t<td>{this.props.tabletopSystem.entity.manager.name}</td>\n\t\t\t\t<td>\n                    <UpdateDialog tabletopSystem={this.props.tabletopSystem}\n                                  attributes={this.props.attributes}\n                                  onUpdate={this.props.onUpdate}\n                                  loggedInAuthor={this.props.loggedInAuthor}/>\n                </td>\n\t\t\t\t<td>\n\t\t\t\t\t<button onClick={this.handleDelete}>Delete</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t)\n\t}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}