{"ast":null,"code":"/*\n * Copyright 2014-2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n(function (define) {\n  'use strict';\n\n  define(function (require) {\n    var when = require('when'),\n        normalizeHeaderName = require('./normalizeHeaderName');\n\n    function property(promise, name) {\n      return promise.then(function (value) {\n        return value && value[name];\n      }, function (value) {\n        return when.reject(value && value[name]);\n      });\n    }\n    /**\n     * Obtain the response entity\n     *\n     * @returns {Promise} for the response entity\n     */\n\n\n    function entity() {\n      /*jshint validthis:true */\n      return property(this, 'entity');\n    }\n    /**\n     * Obtain the response status\n     *\n     * @returns {Promise} for the response status\n     */\n\n\n    function status() {\n      /*jshint validthis:true */\n      return property(property(this, 'status'), 'code');\n    }\n    /**\n     * Obtain the response headers map\n     *\n     * @returns {Promise} for the response headers map\n     */\n\n\n    function headers() {\n      /*jshint validthis:true */\n      return property(this, 'headers');\n    }\n    /**\n     * Obtain a specific response header\n     *\n     * @param {String} headerName the header to retrieve\n     * @returns {Promise} for the response header's value\n     */\n\n\n    function header(headerName) {\n      /*jshint validthis:true */\n      headerName = normalizeHeaderName(headerName);\n      return property(this.headers(), headerName);\n    }\n    /**\n     * Follow a related resource\n     *\n     * The relationship to follow may be define as a plain string, an object\n     * with the rel and params, or an array containing one or more entries\n     * with the previous forms.\n     *\n     * Examples:\n     *   response.follow('next')\n     *\n     *   response.follow({ rel: 'next', params: { pageSize: 100 } })\n     *\n     *   response.follow([\n     *       { rel: 'items', params: { projection: 'noImages' } },\n     *       'search',\n     *       { rel: 'findByGalleryIsNull', params: { projection: 'noImages' } },\n     *       'items'\n     *   ])\n     *\n     * @param {String|Object|Array} rels one, or more, relationships to follow\n     * @returns ResponsePromise<Response> related resource\n     */\n\n\n    function follow(rels) {\n      /*jshint validthis:true */\n      rels = [].concat(rels);\n      return make(when.reduce(rels, function (response, rel) {\n        if (typeof rel === 'string') {\n          rel = {\n            rel: rel\n          };\n        }\n\n        if (typeof response.entity.clientFor !== 'function') {\n          throw new Error('Hypermedia response expected');\n        }\n\n        var client = response.entity.clientFor(rel.rel);\n        return client({\n          params: rel.params\n        });\n      }, this));\n    }\n    /**\n     * Wrap a Promise as an ResponsePromise\n     *\n     * @param {Promise<Response>} promise the promise for an HTTP Response\n     * @returns {ResponsePromise<Response>} wrapped promise for Response with additional helper methods\n     */\n\n\n    function make(promise) {\n      promise.status = status;\n      promise.headers = headers;\n      promise.header = header;\n      promise.entity = entity;\n      promise.follow = follow;\n      return promise;\n    }\n\n    function responsePromise() {\n      return make(when.apply(when, arguments));\n    }\n\n    responsePromise.make = make;\n\n    responsePromise.reject = function (val) {\n      return make(when.reject(val));\n    };\n\n    responsePromise.promise = function (func) {\n      return make(when.promise(func));\n    };\n\n    return responsePromise;\n  });\n})(typeof define === 'function' && define.amd ? define : function (factory) {\n  module.exports = factory(require);\n} // Boilerplate for AMD and Node\n);","map":{"version":3,"names":["define","require","when","normalizeHeaderName","property","promise","name","then","value","reject","entity","status","headers","header","headerName","follow","rels","concat","make","reduce","response","rel","clientFor","Error","client","params","responsePromise","apply","arguments","val","func","amd","factory","module","exports"],"sources":["D:/Chronicle/chronicle-ttm/src/main/frontend/node_modules/rest/util/responsePromise.js"],"sourcesContent":["/*\n * Copyright 2014-2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar when = require('when'),\n\t\t\tnormalizeHeaderName = require('./normalizeHeaderName');\n\n\t\tfunction property(promise, name) {\n\t\t\treturn promise.then(\n\t\t\t\tfunction (value) {\n\t\t\t\t\treturn value && value[name];\n\t\t\t\t},\n\t\t\t\tfunction (value) {\n\t\t\t\t\treturn when.reject(value && value[name]);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Obtain the response entity\n\t\t *\n\t\t * @returns {Promise} for the response entity\n\t\t */\n\t\tfunction entity() {\n\t\t\t/*jshint validthis:true */\n\t\t\treturn property(this, 'entity');\n\t\t}\n\n\t\t/**\n\t\t * Obtain the response status\n\t\t *\n\t\t * @returns {Promise} for the response status\n\t\t */\n\t\tfunction status() {\n\t\t\t/*jshint validthis:true */\n\t\t\treturn property(property(this, 'status'), 'code');\n\t\t}\n\n\t\t/**\n\t\t * Obtain the response headers map\n\t\t *\n\t\t * @returns {Promise} for the response headers map\n\t\t */\n\t\tfunction headers() {\n\t\t\t/*jshint validthis:true */\n\t\t\treturn property(this, 'headers');\n\t\t}\n\n\t\t/**\n\t\t * Obtain a specific response header\n\t\t *\n\t\t * @param {String} headerName the header to retrieve\n\t\t * @returns {Promise} for the response header's value\n\t\t */\n\t\tfunction header(headerName) {\n\t\t\t/*jshint validthis:true */\n\t\t\theaderName = normalizeHeaderName(headerName);\n\t\t\treturn property(this.headers(), headerName);\n\t\t}\n\n\t\t/**\n\t\t * Follow a related resource\n\t\t *\n\t\t * The relationship to follow may be define as a plain string, an object\n\t\t * with the rel and params, or an array containing one or more entries\n\t\t * with the previous forms.\n\t\t *\n\t\t * Examples:\n\t\t *   response.follow('next')\n\t\t *\n\t\t *   response.follow({ rel: 'next', params: { pageSize: 100 } })\n\t\t *\n\t\t *   response.follow([\n\t\t *       { rel: 'items', params: { projection: 'noImages' } },\n\t\t *       'search',\n\t\t *       { rel: 'findByGalleryIsNull', params: { projection: 'noImages' } },\n\t\t *       'items'\n\t\t *   ])\n\t\t *\n\t\t * @param {String|Object|Array} rels one, or more, relationships to follow\n\t\t * @returns ResponsePromise<Response> related resource\n\t\t */\n\t\tfunction follow(rels) {\n\t\t\t/*jshint validthis:true */\n\t\t\trels = [].concat(rels);\n\t\t\treturn make(when.reduce(rels, function (response, rel) {\n\t\t\t\tif (typeof rel === 'string') {\n\t\t\t\t\trel = { rel: rel };\n\t\t\t\t}\n\t\t\t\tif (typeof response.entity.clientFor !== 'function') {\n\t\t\t\t\tthrow new Error('Hypermedia response expected');\n\t\t\t\t}\n\t\t\t\tvar client = response.entity.clientFor(rel.rel);\n\t\t\t\treturn client({ params: rel.params });\n\t\t\t}, this));\n\t\t}\n\n\t\t/**\n\t\t * Wrap a Promise as an ResponsePromise\n\t\t *\n\t\t * @param {Promise<Response>} promise the promise for an HTTP Response\n\t\t * @returns {ResponsePromise<Response>} wrapped promise for Response with additional helper methods\n\t\t */\n\t\tfunction make(promise) {\n\t\t\tpromise.status = status;\n\t\t\tpromise.headers = headers;\n\t\t\tpromise.header = header;\n\t\t\tpromise.entity = entity;\n\t\t\tpromise.follow = follow;\n\t\t\treturn promise;\n\t\t}\n\n\t\tfunction responsePromise() {\n\t\t\treturn make(when.apply(when, arguments));\n\t\t}\n\n\t\tresponsePromise.make = make;\n\t\tresponsePromise.reject = function (val) {\n\t\t\treturn make(when.reject(val));\n\t\t};\n\t\tresponsePromise.promise = function (func) {\n\t\t\treturn make(when.promise(func));\n\t\t};\n\n\t\treturn responsePromise;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AAEC,WAAUA,MAAV,EAAkB;EAClB;;EAEAA,MAAM,CAAC,UAAUC,OAAV,EAAmB;IAEzB,IAAIC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAAlB;IAAA,IACCE,mBAAmB,GAAGF,OAAO,CAAC,uBAAD,CAD9B;;IAGA,SAASG,QAAT,CAAkBC,OAAlB,EAA2BC,IAA3B,EAAiC;MAChC,OAAOD,OAAO,CAACE,IAAR,CACN,UAAUC,KAAV,EAAiB;QAChB,OAAOA,KAAK,IAAIA,KAAK,CAACF,IAAD,CAArB;MACA,CAHK,EAIN,UAAUE,KAAV,EAAiB;QAChB,OAAON,IAAI,CAACO,MAAL,CAAYD,KAAK,IAAIA,KAAK,CAACF,IAAD,CAA1B,CAAP;MACA,CANK,CAAP;IAQA;IAED;AACF;AACA;AACA;AACA;;;IACE,SAASI,MAAT,GAAkB;MACjB;MACA,OAAON,QAAQ,CAAC,IAAD,EAAO,QAAP,CAAf;IACA;IAED;AACF;AACA;AACA;AACA;;;IACE,SAASO,MAAT,GAAkB;MACjB;MACA,OAAOP,QAAQ,CAACA,QAAQ,CAAC,IAAD,EAAO,QAAP,CAAT,EAA2B,MAA3B,CAAf;IACA;IAED;AACF;AACA;AACA;AACA;;;IACE,SAASQ,OAAT,GAAmB;MAClB;MACA,OAAOR,QAAQ,CAAC,IAAD,EAAO,SAAP,CAAf;IACA;IAED;AACF;AACA;AACA;AACA;AACA;;;IACE,SAASS,MAAT,CAAgBC,UAAhB,EAA4B;MAC3B;MACAA,UAAU,GAAGX,mBAAmB,CAACW,UAAD,CAAhC;MACA,OAAOV,QAAQ,CAAC,KAAKQ,OAAL,EAAD,EAAiBE,UAAjB,CAAf;IACA;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;IACE,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;MACrB;MACAA,IAAI,GAAG,GAAGC,MAAH,CAAUD,IAAV,CAAP;MACA,OAAOE,IAAI,CAAChB,IAAI,CAACiB,MAAL,CAAYH,IAAZ,EAAkB,UAAUI,QAAV,EAAoBC,GAApB,EAAyB;QACtD,IAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;UAC5BA,GAAG,GAAG;YAAEA,GAAG,EAAEA;UAAP,CAAN;QACA;;QACD,IAAI,OAAOD,QAAQ,CAACV,MAAT,CAAgBY,SAAvB,KAAqC,UAAzC,EAAqD;UACpD,MAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;QACA;;QACD,IAAIC,MAAM,GAAGJ,QAAQ,CAACV,MAAT,CAAgBY,SAAhB,CAA0BD,GAAG,CAACA,GAA9B,CAAb;QACA,OAAOG,MAAM,CAAC;UAAEC,MAAM,EAAEJ,GAAG,CAACI;QAAd,CAAD,CAAb;MACA,CATW,EAST,IATS,CAAD,CAAX;IAUA;IAED;AACF;AACA;AACA;AACA;AACA;;;IACE,SAASP,IAAT,CAAcb,OAAd,EAAuB;MACtBA,OAAO,CAACM,MAAR,GAAiBA,MAAjB;MACAN,OAAO,CAACO,OAAR,GAAkBA,OAAlB;MACAP,OAAO,CAACQ,MAAR,GAAiBA,MAAjB;MACAR,OAAO,CAACK,MAAR,GAAiBA,MAAjB;MACAL,OAAO,CAACU,MAAR,GAAiBA,MAAjB;MACA,OAAOV,OAAP;IACA;;IAED,SAASqB,eAAT,GAA2B;MAC1B,OAAOR,IAAI,CAAChB,IAAI,CAACyB,KAAL,CAAWzB,IAAX,EAAiB0B,SAAjB,CAAD,CAAX;IACA;;IAEDF,eAAe,CAACR,IAAhB,GAAuBA,IAAvB;;IACAQ,eAAe,CAACjB,MAAhB,GAAyB,UAAUoB,GAAV,EAAe;MACvC,OAAOX,IAAI,CAAChB,IAAI,CAACO,MAAL,CAAYoB,GAAZ,CAAD,CAAX;IACA,CAFD;;IAGAH,eAAe,CAACrB,OAAhB,GAA0B,UAAUyB,IAAV,EAAgB;MACzC,OAAOZ,IAAI,CAAChB,IAAI,CAACG,OAAL,CAAayB,IAAb,CAAD,CAAX;IACA,CAFD;;IAIA,OAAOJ,eAAP;EAEA,CA5HK,CAAN;AA8HA,CAjIA,EAkIA,OAAO1B,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAAC+B,GAAvC,GAA6C/B,MAA7C,GAAsD,UAAUgC,OAAV,EAAmB;EAAEC,MAAM,CAACC,OAAP,GAAiBF,OAAO,CAAC/B,OAAD,CAAxB;AAAoC,CAlI/G,CAmIA;AAnIA,CAAD"},"metadata":{},"sourceType":"script"}