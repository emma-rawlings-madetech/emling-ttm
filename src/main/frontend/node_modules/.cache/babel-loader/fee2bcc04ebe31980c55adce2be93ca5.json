{"ast":null,"code":"/*\n * Copyright 2015-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n'use strict';\n\nvar uriEncoder, operations, prefixRE;\nuriEncoder = require('./uriEncoder');\nprefixRE = /^([^:]*):([0-9]+)$/;\noperations = {\n  '': {\n    first: '',\n    separator: ',',\n    named: false,\n    empty: '',\n    encoder: uriEncoder.encode\n  },\n  '+': {\n    first: '',\n    separator: ',',\n    named: false,\n    empty: '',\n    encoder: uriEncoder.encodeURL\n  },\n  '#': {\n    first: '#',\n    separator: ',',\n    named: false,\n    empty: '',\n    encoder: uriEncoder.encodeURL\n  },\n  '.': {\n    first: '.',\n    separator: '.',\n    named: false,\n    empty: '',\n    encoder: uriEncoder.encode\n  },\n  '/': {\n    first: '/',\n    separator: '/',\n    named: false,\n    empty: '',\n    encoder: uriEncoder.encode\n  },\n  ';': {\n    first: ';',\n    separator: ';',\n    named: true,\n    empty: '',\n    encoder: uriEncoder.encode\n  },\n  '?': {\n    first: '?',\n    separator: '&',\n    named: true,\n    empty: '=',\n    encoder: uriEncoder.encode\n  },\n  '&': {\n    first: '&',\n    separator: '&',\n    named: true,\n    empty: '=',\n    encoder: uriEncoder.encode\n  },\n  '=': {\n    reserved: true\n  },\n  ',': {\n    reserved: true\n  },\n  '!': {\n    reserved: true\n  },\n  '@': {\n    reserved: true\n  },\n  '|': {\n    reserved: true\n  }\n};\n\nfunction apply(operation, expression, params) {\n  /*jshint maxcomplexity:11 */\n  return expression.split(',').reduce(function (result, variable) {\n    var opts, value;\n    opts = {};\n\n    if (variable.slice(-1) === '*') {\n      variable = variable.slice(0, -1);\n      opts.explode = true;\n    }\n\n    if (prefixRE.test(variable)) {\n      var prefix = prefixRE.exec(variable);\n      variable = prefix[1];\n      opts.maxLength = parseInt(prefix[2]);\n    }\n\n    variable = uriEncoder.decode(variable);\n    value = params[variable];\n\n    if (value === void 0 || value === null) {\n      return result;\n    }\n\n    if (Array.isArray(value)) {\n      result = value.reduce(function (result, value) {\n        if (result.length) {\n          result += opts.explode ? operation.separator : ',';\n\n          if (operation.named && opts.explode) {\n            result += operation.encoder(variable);\n            result += value.length ? '=' : operation.empty;\n          }\n        } else {\n          result += operation.first;\n\n          if (operation.named) {\n            result += operation.encoder(variable);\n            result += value.length ? '=' : operation.empty;\n          }\n        }\n\n        result += operation.encoder(value);\n        return result;\n      }, result);\n    } else if (typeof value === 'object') {\n      result = Object.keys(value).reduce(function (result, name) {\n        if (result.length) {\n          result += opts.explode ? operation.separator : ',';\n        } else {\n          result += operation.first;\n\n          if (operation.named && !opts.explode) {\n            result += operation.encoder(variable);\n            result += value[name].length ? '=' : operation.empty;\n          }\n        }\n\n        result += operation.encoder(name);\n        result += opts.explode ? '=' : ',';\n        result += operation.encoder(value[name]);\n        return result;\n      }, result);\n    } else {\n      value = String(value);\n\n      if (opts.maxLength) {\n        value = value.slice(0, opts.maxLength);\n      }\n\n      result += result.length ? operation.separator : operation.first;\n\n      if (operation.named) {\n        result += operation.encoder(variable);\n        result += value.length ? '=' : operation.empty;\n      }\n\n      result += operation.encoder(value);\n    }\n\n    return result;\n  }, '');\n}\n\nfunction expandExpression(expression, params) {\n  var operation;\n  operation = operations[expression.slice(0, 1)];\n\n  if (operation) {\n    expression = expression.slice(1);\n  } else {\n    operation = operations[''];\n  }\n\n  if (operation.reserved) {\n    throw new Error('Reserved expression operations are not supported');\n  }\n\n  return apply(operation, expression, params);\n}\n\nfunction expandTemplate(template, params) {\n  var start, end, uri;\n  uri = '';\n  end = 0;\n\n  while (true) {\n    start = template.indexOf('{', end);\n\n    if (start === -1) {\n      // no more expressions\n      uri += template.slice(end);\n      break;\n    }\n\n    uri += template.slice(end, start);\n    end = template.indexOf('}', start) + 1;\n    uri += expandExpression(template.slice(start + 1, end - 1), params);\n  }\n\n  return uri;\n}\n\nmodule.exports = {\n  /**\n   * Expand a URI Template with parameters to form a URI.\n   *\n   * Full implementation (level 4) of rfc6570.\n   * @see https://tools.ietf.org/html/rfc6570\n   *\n   * @param {string} template URI template\n   * @param {Object} [params] params to apply to the template durring expantion\n   * @returns {string} expanded URI\n   */\n  expand: expandTemplate\n};","map":{"version":3,"names":["uriEncoder","operations","prefixRE","require","first","separator","named","empty","encoder","encode","encodeURL","reserved","apply","operation","expression","params","split","reduce","result","variable","opts","value","slice","explode","test","prefix","exec","maxLength","parseInt","decode","Array","isArray","length","Object","keys","name","String","expandExpression","Error","expandTemplate","template","start","end","uri","indexOf","module","exports","expand"],"sources":["D:/Chronicle/chronicle-ttm/src/main/frontend/node_modules/rest/util/uriTemplate.js"],"sourcesContent":["/*\n * Copyright 2015-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n'use strict';\n\nvar uriEncoder, operations, prefixRE;\n\nuriEncoder = require('./uriEncoder');\n\nprefixRE = /^([^:]*):([0-9]+)$/;\noperations = {\n\t'':  { first: '',  separator: ',', named: false, empty: '',  encoder: uriEncoder.encode },\n\t'+': { first: '',  separator: ',', named: false, empty: '',  encoder: uriEncoder.encodeURL },\n\t'#': { first: '#', separator: ',', named: false, empty: '',  encoder: uriEncoder.encodeURL },\n\t'.': { first: '.', separator: '.', named: false, empty: '',  encoder: uriEncoder.encode },\n\t'/': { first: '/', separator: '/', named: false, empty: '',  encoder: uriEncoder.encode },\n\t';': { first: ';', separator: ';', named: true,  empty: '',  encoder: uriEncoder.encode },\n\t'?': { first: '?', separator: '&', named: true,  empty: '=', encoder: uriEncoder.encode },\n\t'&': { first: '&', separator: '&', named: true,  empty: '=', encoder: uriEncoder.encode },\n\t'=': { reserved: true },\n\t',': { reserved: true },\n\t'!': { reserved: true },\n\t'@': { reserved: true },\n\t'|': { reserved: true }\n};\n\nfunction apply(operation, expression, params) {\n\t/*jshint maxcomplexity:11 */\n\treturn expression.split(',').reduce(function (result, variable) {\n\t\tvar opts, value;\n\n\t\topts = {};\n\t\tif (variable.slice(-1) === '*') {\n\t\t\tvariable = variable.slice(0, -1);\n\t\t\topts.explode = true;\n\t\t}\n\t\tif (prefixRE.test(variable)) {\n\t\t\tvar prefix = prefixRE.exec(variable);\n\t\t\tvariable = prefix[1];\n\t\t\topts.maxLength = parseInt(prefix[2]);\n\t\t}\n\n\t\tvariable = uriEncoder.decode(variable);\n\t\tvalue = params[variable];\n\n\t\tif (value === void 0 || value === null) {\n\t\t\treturn result;\n\t\t}\n\t\tif (Array.isArray(value)) {\n\t\t\tresult = value.reduce(function (result, value) {\n\t\t\t\tif (result.length) {\n\t\t\t\t\tresult += opts.explode ? operation.separator : ',';\n\t\t\t\t\tif (operation.named && opts.explode) {\n\t\t\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\t\t\tresult += value.length ? '=' : operation.empty;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresult += operation.first;\n\t\t\t\t\tif (operation.named) {\n\t\t\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\t\t\tresult += value.length ? '=' : operation.empty;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresult += operation.encoder(value);\n\t\t\t\treturn result;\n\t\t\t}, result);\n\t\t}\n\t\telse if (typeof value === 'object') {\n\t\t\tresult = Object.keys(value).reduce(function (result, name) {\n\t\t\t\tif (result.length) {\n\t\t\t\t\tresult += opts.explode ? operation.separator : ',';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresult += operation.first;\n\t\t\t\t\tif (operation.named && !opts.explode) {\n\t\t\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\t\t\tresult += value[name].length ? '=' : operation.empty;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresult += operation.encoder(name);\n\t\t\t\tresult += opts.explode ? '=' : ',';\n\t\t\t\tresult += operation.encoder(value[name]);\n\t\t\t\treturn result;\n\t\t\t}, result);\n\t\t}\n\t\telse {\n\t\t\tvalue = String(value);\n\t\t\tif (opts.maxLength) {\n\t\t\t\tvalue = value.slice(0, opts.maxLength);\n\t\t\t}\n\t\t\tresult += result.length ? operation.separator : operation.first;\n\t\t\tif (operation.named) {\n\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\tresult += value.length ? '=' : operation.empty;\n\t\t\t}\n\t\t\tresult += operation.encoder(value);\n\t\t}\n\n\t\treturn result;\n\t}, '');\n}\n\nfunction expandExpression(expression, params) {\n\tvar operation;\n\n\toperation = operations[expression.slice(0,1)];\n\tif (operation) {\n\t\texpression = expression.slice(1);\n\t}\n\telse {\n\t\toperation = operations[''];\n\t}\n\n\tif (operation.reserved) {\n\t\tthrow new Error('Reserved expression operations are not supported');\n\t}\n\n\treturn apply(operation, expression, params);\n}\n\nfunction expandTemplate(template, params) {\n\tvar start, end, uri;\n\n\turi = '';\n\tend = 0;\n\twhile (true) {\n\t\tstart = template.indexOf('{', end);\n\t\tif (start === -1) {\n\t\t\t// no more expressions\n\t\t\turi += template.slice(end);\n\t\t\tbreak;\n\t\t}\n\t\turi += template.slice(end, start);\n\t\tend = template.indexOf('}', start) + 1;\n\t\turi += expandExpression(template.slice(start + 1, end - 1), params);\n\t}\n\n\treturn uri;\n}\n\nmodule.exports = {\n\n\t/**\n\t * Expand a URI Template with parameters to form a URI.\n\t *\n\t * Full implementation (level 4) of rfc6570.\n\t * @see https://tools.ietf.org/html/rfc6570\n\t *\n\t * @param {string} template URI template\n\t * @param {Object} [params] params to apply to the template durring expantion\n\t * @returns {string} expanded URI\n\t */\n\texpand: expandTemplate\n\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}